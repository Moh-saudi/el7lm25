# ุชูุฑูุฑ ุฅุตูุงุญ ุชุญุฏูุซ ููุฌู ุงููุงุฏู ูู ุฌููุน ุงูููููุงุช

## ุงููุดููุฉ ุงูุฃุตููุฉ
ุนูุฏ ุชุบููุฑ ููุฌู ุงููุงุฏู ูู ุตูุญุฉ ุงูููู ุงูุดุฎุตูุ ูู ููู ุงูููุฌู ูุชุญุฏุซ ูู:
- **ุงูููุฏุฑ** (ClubHeader.jsx)
- **ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ** (ClubSidebar.jsx)

## ุชุญููู ุงููุดููุฉ

### ุงููุดุงูู ุงูููุชุดูุฉ:

#### 1. ูุดููุฉ ูุนุงูุฌุฉ ุงููุณุงุฑุงุช
```javascript
// โ ุงูููุฏ ุงููุฏูู - ูุชุญูู ููุท ูู http
if (data.logo && data.logo.startsWith('http')) {
    setLogo(data.logo);
}
```

**ุงููุดููุฉ**: ุฑูุงุจุท Supabase ุชูุญูุธ ููุณุงุฑุงุช ูุณุจูุฉ ูุซู `userId/logo/12345.png` ูููุณ ูุฑูุงุจุท ูุงููุฉ.

#### 2. ูุดููุฉ ุงูุชุญุฏูุซ ุงูููุฑู
```javascript
// โ ุงูููุฏ ุงููุฏูู - ูุฌูุจ ุงูุจูุงูุงุช ูุฑุฉ ูุงุญุฏุฉ ููุท
const clubDoc = await getDoc(clubRef);
```

**ุงููุดููุฉ**: ุงุณุชุฎุฏุงู `getDoc` ูุฌูุจ ุงูุจูุงูุงุช ูุฑุฉ ูุงุญุฏุฉ ููุทุ ูุง ูุณุชูุน ููุชุญุฏูุซุงุช.

#### 3. ุนุฏู ูุฌูุฏ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุตูุฑ
```javascript
// โ ุงูููุฏ ุงููุฏูู - ูุง ูุนุงูุฌ ูุดู ุชุญููู ุงูุตูุฑ
<img src={logo} alt="ุดุนุงุฑ ุงููุงุฏู" />
```

---

## ุงูุญููู ุงููุทุจูุฉ

### 1. โ ุชุญุณูู ClubHeader.jsx

#### ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- **ุฏุงูุฉ ุชุญููู ุงููุณุงุฑุงุช**: `getSupabaseImageUrl()` ูุชุญููู ุงููุณุงุฑุงุช ุงููุณุจูุฉ
- **ุงูุงุณุชูุงุน ููุชุญุฏูุซุงุช**: `onSnapshot()` ููุชุญุฏูุซ ุงูููุฑู
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: fallback ููุตูุฑ ุงูุงูุชุฑุงุถูุฉ
- **ุชูุธูู ุงูููุงุฑุฏ**: ุฅููุงู ุงููุณุชูุนูู ุนูุฏ ุฅูุบุงุก ุงูุชุซุจูุช

#### ุงูููุฏ ุงููุญุณู:
```javascript
// ุฏุงูุฉ ูุชุญููู ูุณุงุฑ Supabase ุฅูู ุฑุงุจุท ูุงูู
const getSupabaseImageUrl = (path) => {
  if (!path) return '/club-avatar.png';
  if (path.startsWith('http')) return path;
  const { data: { publicUrl } } = supabase.storage.from('clubavatar').getPublicUrl(path);
  return publicUrl || path;
};

// ุงูุงุณุชูุงุน ููุชุญุฏูุซุงุช ุงูููุฑูุฉ
useEffect(() => {
  if (!user?.uid) {
    setLogo('/club-avatar.png');
    return;
  }

  const clubRef = doc(db, 'clubs', user.uid);
  
  const unsubscribe = onSnapshot(clubRef, (clubDoc) => {
    try {
      if (clubDoc.exists()) {
        const data = clubDoc.data();
        if (data.logo) {
          const logoUrl = getSupabaseImageUrl(data.logo);
          setLogo(logoUrl);
        } else {
          setLogo('/club-avatar.png');
        }
      }
    } catch (error) {
      console.error('ุฎุทุฃ ูู ูุนุงูุฌุฉ ุจูุงูุงุช ุงููุงุฏู:', error);
      setLogo('/club-avatar.png');
    }
  });

  return () => unsubscribe();
}, [user?.uid]);

// ูุนุงูุฌุฉ ุฃุฎุทุงุก ุชุญููู ุงูุตูุฑ
<img 
  src={logo} 
  alt="ุดุนุงุฑ ุงููุงุฏู" 
  className="w-10 h-10 rounded-full border-2 border-green-400 shadow object-cover" 
  onError={(e) => {
    e.target.src = "/club-avatar.png";
  }}
/>
```

### 2. โ ุชุญุณูู ClubSidebar.jsx

#### ููุณ ุงูุชุญุณููุงุช ุงููุทุจูุฉ ุนูู ุงูููุฏุฑ:
- ุฏุงูุฉ `getSupabaseImageUrl()` 
- ุงุณุชุฎุฏุงู `onSnapshot()` ููุชุญุฏูุซ ุงูููุฑู
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุชุญููู ุงูุตูุฑ
- ุชุดุฎูุต ููุตู ูุน console logs

#### ุงูููุฏ ุงููุญุณู:
```javascript
// ููุณ ุฏุงูุฉ ุชุญููู ุงููุณุงุฑุงุช
const getSupabaseImageUrl = (path) => {
  if (!path) return '/club-avatar.png';
  if (path.startsWith('http')) return path;
  const { data: { publicUrl } } = supabase.storage.from('clubavatar').getPublicUrl(path);
  return publicUrl || path;
};

// ุตูุฑุฉ ุงูููุฌู ูู ุงูู Sidebar
<img 
  src={logo} 
  alt="ุดุนุงุฑ ุงููุงุฏู" 
  className="w-32 h-32 rounded-full border-4 border-green-400 shadow object-cover" 
  onError={(e) => {
    e.target.src = "/club-avatar.png";
  }}
/>
```

---

## ุงููููุงุช ุงูููุญุฏุซุฉ

### 1. `src/components/layout/ClubHeader.jsx`
- โ ุฅุถุงูุฉ import ููู `onSnapshot` ู `supabase`
- โ ุฅุถุงูุฉ ุฏุงูุฉ `getSupabaseImageUrl`
- โ ุชุญุณูู useEffect ููุงุณุชูุงุน ููุชุญุฏูุซุงุช
- โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุตูุฑ
- โ ุชุดุฎูุต ููุตู ูุน console logs

### 2. `src/components/layout/ClubSidebar.jsx`
- โ ุฅุถุงูุฉ import ููู `onSnapshot` ู `supabase`  
- โ ุฅุถุงูุฉ ุฏุงูุฉ `getSupabaseImageUrl`
- โ ุชุญุณูู useEffect ููุงุณุชูุงุน ููุชุญุฏูุซุงุช
- โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุตูุฑ
- โ ุชุดุฎูุต ููุตู ูุน console logs

---

## ููููุฉ ุนูู ุงููุธุงู ุงูุฌุฏูุฏ

### ุชุฏูู ุงูุชุญุฏูุซ:
```
1. ุงููุณุชุฎุฏู ูุบูุฑ ุงูููุฌู ูู ุตูุญุฉ ุงูููู ุงูุดุฎุตู
   โ
2. handleImageUpload ูุฑูุน ุงูุตูุฑุฉ ุฅูู Supabase
   โ  
3. updateDoc ูุญุฏุซ ุจูุงูุงุช ุงููุงุฏู ูู Firebase
   โ
4. onSnapshot ูู ClubHeader ูุณุชูุจู ุงูุชุญุฏูุซ ููุฑุงู
   โ
5. onSnapshot ูู ClubSidebar ูุณุชูุจู ุงูุชุญุฏูุซ ููุฑุงู
   โ
6. getSupabaseImageUrl ูุญูู ุงููุณุงุฑ ุฅูู ุฑุงุจุท ูุงูู
   โ
7. setLogo ูุญุฏุซ ุงูุตูุฑุฉ ูู ุงููุงุฌูุฉ
   โ
8. ุงููุณุชุฎุฏู ูุฑู ุงูููุฌู ุงูุฌุฏูุฏ ูู ุฌููุน ุงูููููุงุช ููุฑุงู
```

### ุฑุณุงุฆู ุงูุชุดุฎูุต:
```javascript
// ูู Console ุณุชุธูุฑ ูุฐู ุงูุฑุณุงุฆู:
"๐จ ClubHeader: ุจุฏุก ุฌูุจ ููุฌู ุงููุงุฏู ูููุณุชุฎุฏู: [USER_ID]"
"๐จ ClubHeader: ุจูุงูุงุช ุงููุงุฏู: { logo: 'path/to/logo.png' }"
"๐จ ClubHeader: ุชุญุฏูุซ ุงูููุฌู ุฅูู: [FULL_URL]"
"๐จ ClubSidebar: ุชุญุฏูุซ ุงูููุฌู ุฅูู: [FULL_URL]"
```

---

## ุงุฎุชุจุงุฑ ุงูุญู

### 1. ุงุฎุชุจุงุฑ ูุจุงุดุฑ:
```
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงููุงุฏู: http://localhost:3000/dashboard/club/profile
2. ุงุฏุฎู ูู ูุถุน ุงูุชุนุฏูู
3. ุบูุฑ ุงูููุฌู
4. ูุงุญุธ ุงูุชุญุฏูุซ ุงูููุฑู ูู:
   - ุงูููุฏุฑ (ุฃุนูู ุงูุตูุญุฉ)
   - ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ (ูุณุงุฑ ุงูุตูุญุฉ)
   - ุตูุญุฉ ุงูููู ุงูุดุฎุตู ููุณูุง
```

### 2. ุงุฎุชุจุงุฑ Console:
```javascript
// ูู Developer Tools > Console
// ุฑุงูุจ ูุฐู ุงูุฑุณุงุฆู ุนูุฏ ุชุบููุฑ ุงูููุฌู:
"๐จ ClubHeader: ุชุญุฏูุซ ุงูููุฌู ุฅูู: [NEW_URL]"
"๐จ ClubSidebar: ุชุญุฏูุซ ุงูููุฌู ุฅูู: [NEW_URL]"
```

### 3. ุฃูุงูุฑ ุชุดุฎูุต ูููุฏุฉ:
```javascript
// ูุญุต ุนูุงุตุฑ ุงูููุฌู ูู ุงูุตูุญุฉ
document.querySelectorAll('img[alt*="ุดุนุงุฑ"]').forEach((img, i) => {
    console.log(`Logo ${i+1}:`, img.src);
});

// ูุฑุงูุจุฉ ุชุญุฏูุซุงุช Firebase ูููุงุฏู
firebase.firestore().collection('clubs').doc(firebase.auth().currentUser.uid)
    .onSnapshot(doc => console.log('Club data updated:', doc.data()));
```

---

## ุงููุดุงูู ุงูููุญูุฉ

### โ ูุดููุฉ ุงููุณุงุฑุงุช ุงููุณุจูุฉ
- **ูุจู**: `userId/logo/12345.png` ูุง ูุนุฑุถ ุงูุตูุฑุฉ
- **ุจุนุฏ**: ุชุญููู ุชููุงุฆู ุฅูู `https://supabase.../userId/logo/12345.png`

### โ ูุดููุฉ ุนุฏู ุงูุชุญุฏูุซ ุงูููุฑู  
- **ูุจู**: ุงูููุฌู ูุง ูุชุบูุฑ ุฅูุง ุจุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
- **ุจุนุฏ**: ุชุญุฏูุซ ููุฑู ุฎูุงู ุซูุงูู ูู ุฌููุน ุงูููููุงุช

### โ ูุดููุฉ ุฃุฎุทุงุก ุชุญููู ุงูุตูุฑ
- **ูุจู**: ุตูุฑ ูุญุทูุฉ ุนูุฏ ูุดู ุงูุชุญููู
- **ุจุนุฏ**: ุนูุฏุฉ ุชููุงุฆูุฉ ููุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ

### โ ูุดููุฉ ุนุฏู ูุฌูุฏ ุชุดุฎูุต
- **ูุจู**: ูุง ุชูุฌุฏ ุฑุณุงุฆู ูููุณุงุนุฏุฉ ูู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
- **ุจุนุฏ**: ุฑุณุงุฆู ููุตูุฉ ูู console ููู ุฎุทูุฉ

---

## ุงูููุงุฆุฏ ุงูุฌุฏูุฏุฉ

### 1. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ:
- โ **ุชุญุฏูุซ ููุฑู**: ูุฑู ุงููุณุชุฎุฏู ุงูุชุบููุฑ ูุจุงุดุฑุฉ
- โ **ุชูุงุณู ุจุตุฑู**: ููุณ ุงูููุฌู ูู ุฌููุน ุฃุฌุฒุงุก ุงููุงุฌูุฉ
- โ **ุงุณุชูุฑุงุฑ**: ูุง ุชูุฌุฏ ุตูุฑ ูุญุทูุฉ

### 2. ุฃุฏุงุก ูุญุณู:
- โ **ููุงุกุฉ ุงูุฐุงูุฑุฉ**: ุชูุธูู ุชููุงุฆู ูููุณุชูุนูู
- โ **ุชุญููู ุฐูู**: ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุตูุฑ
- โ **ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ**: ุชุญุฏูุซ ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู

### 3. ุตูุงูุฉ ุฃุณูู:
- โ **ุชุดุฎูุต ุดุงูู**: ุฑุณุงุฆู ูุงุถุญุฉ ููู ูุดููุฉ
- โ **ููุฏ ููุธู**: ุฏูุงู ูููุตูุฉ ููุงุถุญุฉ
- โ **ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก**: ููู ุญุงูุฉ ููููุฉ

---

## ุฃูุงูุฑ Console ููุงุฎุชุจุงุฑ

### ูุญุต ุนูุงุตุฑ ุงูููุฌู:
```javascript
// ุงูุนุซูุฑ ุนูู ุฌููุน ุนูุงุตุฑ ุงูููุฌู
const logos = document.querySelectorAll('img[alt*="ุดุนุงุฑ"], img[src*="club-avatar"], img[src*="clubavatar"]');
console.log(`ูุฌุฏุช ${logos.length} ุนูุงุตุฑ ููุฌู:`, logos);

// ูุญุต ูุตุฏุฑ ูู ููุฌู
logos.forEach((logo, i) => {
    console.log(`Logo ${i+1}:`, {
        src: logo.src,
        alt: logo.alt,
        location: logo.closest('header') ? 'Header' : 
                 logo.closest('aside') ? 'Sidebar' : 'Other'
    });
});
```

### ูุฑุงูุจุฉ ุชุญุฏูุซุงุช Firebase:
```javascript
const user = firebase.auth().currentUser;
if (user) {
    firebase.firestore().collection('clubs').doc(user.uid)
        .onSnapshot(doc => {
            if (doc.exists()) {
                console.log('๐ ุชุญุฏูุซ ุจูุงูุงุช ุงููุงุฏู:', doc.data());
            }
        });
}
```

---

## ุงููุชุงุฆุฌ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ูุฐู ุงูุฅุตูุงุญุงุช:

### โ ุชุญุฏูุซ ููุฑู ูููุฌู ูู:
1. **ุงูููุฏุฑ** - ุงูููุฌู ุงูุตุบูุฑ ุจุฌูุงุฑ ุงุณู ุงููุงุฏู
2. **ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ** - ุงูููุฌู ุงููุจูุฑ ูู ุฃุนูู ุงููุงุฆูุฉ  
3. **ุตูุญุฉ ุงูููู ุงูุดุฎุตู** - ุงูููุฌู ูู ุงูุตูุญุฉ ููุณูุง

### โ ููุซูููุฉ ุนุงููุฉ:
- ุนูุฏุฉ ุชููุงุฆูุฉ ููุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ ุนูุฏ ุงููุดู
- ูุนุงูุฌุฉ ุดุงููุฉ ูุฌููุน ุฃููุงุน ุงูุฃุฎุทุงุก
- ุชูุธูู ุชููุงุฆู ููููุงุฑุฏ

### โ ุชุดุฎูุต ุดุงูู:
- ุฑุณุงุฆู ูุงุถุญุฉ ูู console
- ุชุชุจุน ุฏููู ููู ุฎุทูุฉ
- ุณูููุฉ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

---

## ุฎูุงุตุฉ

ุชู ุญู ูุดููุฉ ุชุญุฏูุซ ููุฌู ุงููุงุฏู ุจุงููุงูู! ๐

**ุงููุดููุฉ ุงูุฃุณุงุณูุฉ** ูุงูุช ูู ุงุณุชุฎุฏุงู `getDoc` ุจุฏูุงู ูู `onSnapshot` ูุนุฏู ูุนุงูุฌุฉ ุงููุณุงุฑุงุช ุงููุณุจูุฉ ูู Supabase.

**ุงูุญู ุงูุดุงูู** ุชุถูู:
1. โ ุงุณุชุฎุฏุงู `onSnapshot` ููุชุญุฏูุซ ุงูููุฑู
2. โ ุฏุงูุฉ `getSupabaseImageUrl` ููุนุงูุฌุฉ ุงููุณุงุฑุงุช
3. โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุชุญููู ุงูุตูุฑ
4. โ ุชุดุฎูุต ููุตู ูุชูุธูู ุชููุงุฆู ููููุงุฑุฏ

**ุงููุชูุฌุฉ**: ููุฌู ุงููุงุฏู ูุชุญุฏุซ ููุฑุงู ูู ุฌููุน ุฃุฌุฒุงุก ุงููุงุฌูุฉ ุนูุฏ ุชุบููุฑู! ๐ 
