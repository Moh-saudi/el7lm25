# โ ุชูุนูู ุงูุฏูุน ุจุงูุจุทุงูุฉ ุงูุจูููุฉ ุนุจุฑ ุฌูุฏูุง ูู ุงูุฏูุน ุงูุฌูุงุนู

## ๐ฏ ูุง ุชู ุฅูุฌุงุฒู

ุชู ุชูุนูู ูุธุงู ุงูุฏูุน ุจุงูุจุทุงูุฉ ุงูุจูููุฉ ุนุจุฑ ุฌูุฏูุง ุจุงููุงูู ูู ุตูุญุฉ ุงูุฏูุน ุงูุฌูุงุนู ูุน ุฏูุฌ ูุงูู ููุชุทูุฑ.

## ๐ง ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ

### 1. ุฅุถุงูุฉ ููุชุจุงุช ุฌูุฏูุง
```tsx
import GeideaPaymentModal from '@/components/GeideaPaymentModal';
```

### 2. ุฅุถุงูุฉ State ููููุฏุงู
```tsx
const [showGeideaModal, setShowGeideaModal] = useState(false);
```

### 3. ุฏุงูุฉ ุงูุฏูุน ุงูุฌูุงุนู
```tsx
const handleGeideaPayment = () => {
  if (selectedCount === 0) {
    alert('ูุฑุฌู ุงุฎุชูุงุฑ ูุงุนุจ ูุงุญุฏ ุนูู ุงูุฃูู ููุฏูุน');
    return;
  }
  
  // ูุชุญ ููุฏุงู ุงูุฏูุน
  setShowGeideaModal(true);
};
```

### 4. ูุนุงูุฌุฉ ูุฌุงุญ ุงูุฏูุน
```tsx
const handlePaymentSuccess = async (paymentData: any) => {
  try {
    console.log('โ ูุฌุญ ุงูุฏูุน ุงูุฌูุงุนู:', paymentData);
    
    // ุญูุธ ุจูุงูุงุช ุงูุฏูุน ุงูุฌูุงุนู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    const { data, error } = await supabase
      .from('bulk_payments')
      .insert([{
        user_id: user?.uid,
        account_type: accountType,
        players: selectedPlayers.map(p => ({
          id: p.id,
          name: p.name,
          package: selectedPackage,
          amount: subscriptionPrice
        })),
        total_amount: finalPrice,
        original_amount: originalTotal,
        discount_amount: totalSavings,
        payment_method: 'geidea',
        payment_status: 'completed',
        transaction_id: paymentData.sessionId || paymentData.transactionId,
        order_id: paymentData.orderId,
        country: selectedCountry,
        currency: currentCurrency,
        exchange_rate: CURRENCY_RATES[currentCurrency as keyof typeof CURRENCY_RATES]?.rate || 1,
        created_at: new Date()
      }]);

    if (error) throw error;

    alert('๐ ุชู ุงูุฏูุน ุจูุฌุงุญ! ุณูุชู ุชูุนูู ุงุดุชุฑุงูุงุช ุงููุงุนุจูู ุฎูุงู ุฏูุงุฆู ููููุฉ.');
    
    // ุฅุนุงุฏุฉ ุชุนููู ุงูุชุญุฏูุฏุงุช
    setPlayers(prev => prev.map(player => ({
      ...player,
      selected: false
    })));
    
  } catch (error) {
    console.error('ุฎุทุฃ ูู ูุนุงูุฌุฉ ุงูุฏูุน:', error);
    alert('ุชู ุงูุฏูุน ุจูุฌุงุญุ ููู ุญุฏุซ ุฎุทุฃ ูู ุญูุธ ุงูุจูุงูุงุช. ูุฑุฌู ุงูุงุชุตุงู ุจุงูุฏุนู ุงูููู.');
  }
};
```

### 5. ุชุญุฏูุซ ุฒุฑ ุงูุฏูุน
```tsx
{selectedPaymentMethod === 'geidea' && (
  <button 
    onClick={handleGeideaPayment}
    className="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105"
  >
    <div className="flex items-center justify-center gap-3">
      <CreditCard className="w-5 h-5" />
      <span>ุงุฏูุน ุจุงูุจุทุงูุฉ - {finalPrice.toLocaleString()} {currency.symbol}</span>
    </div>
    <div className="text-sm opacity-90 mt-1">
      ุฏูุน ุขูู ููุดูุฑ ุนุจุฑ ุฌูุฏูุง
    </div>
  </button>
)}
```

### 6. ุฅุถุงูุฉ ููุฏุงู ุฌูุฏูุง
```tsx
<GeideaPaymentModal
  visible={showGeideaModal}
  onRequestClose={() => setShowGeideaModal(false)}
  onPaymentSuccess={handlePaymentSuccess}
  onPaymentFailure={handlePaymentFailure}
  amount={finalPrice}
  currency={currentCurrency}
  title="ุงูุฏูุน ุงูุฌูุงุนู ููุงุนุจูู"
  description={`ุฏูุน ุงุดุชุฑุงูุงุช ${selectedCount} ูุงุนุจ ุจุฅุฌูุงูู ${finalPrice.toLocaleString()} ${currency.symbol}`}
  customerEmail={user?.email || 'customer@example.com'}
  merchantReferenceId={`BULK_${accountType.toUpperCase()}_${user?.uid}_${Date.now()}`}
/>
```

## ๐ฏ ุงูููุฒุงุช ุงููุชุทูุฑุฉ

### 1. **ุญุณุงุจ ุงููุจูุบ ุงูุฐูู**
- โ ุญุณุงุจ ุงูุณุนุฑ ููู ูุงุนุจ ุญุณุจ ุงูุจุงูุฉ ุงููุฎุชุงุฑุฉ
- โ ุชุทุจูู ุงูุฎุตููุงุช ุงูุฌูุงุนูุฉ (5%, 7%, 10%, 15%)
- โ ุฎุตููุงุช ุทุฑููุฉ ุงูุฏูุน
- โ ุชุญููู ุงูุนููุงุช ููุฏูู ุงููุฎุชููุฉ

### 2. **ูุนุฑู ุงูุทูุจ ุงูุฐูู**
```tsx
merchantReferenceId={`BULK_${accountType.toUpperCase()}_${user?.uid}_${Date.now()}`}
```
ูุซุงู: `BULK_CLUB_abc123_1699123456789`

### 3. **ุญูุธ ุงูุจูุงูุงุช ุงูุดุงูู**
- ๐ฅ ุชูุงุตูู ุงููุงุนุจูู ุงููุฎุชุงุฑูู
- ๐ฐ ุงููุจุงูุบ ุงูุฃุตููุฉ ูุงููุฎูุถุฉ
- ๐ ุงูุฏููุฉ ูุงูุนููุฉ ููุนุฏู ุงูุชุญููู
- ๐งพ ูุนุฑู ุงููุนุงููุฉ ูู ุฌูุฏูุง
- ๐ ุชุงุฑูุฎ ุงูุนูููุฉ

### 4. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุชุทูุฑุฉ**
- โก ูุชุญ ููุฏุงู ุงูุฏูุน ููุฑู
- ๐ ูุนุงูุฌุฉ ุขููุฉ ูููุฏููุนุงุช
- โ ุฑุณุงุฆู ูุฌุงุญ ูุงุถุญุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุฐููุฉ
- ๐ ุฅุนุงุฏุฉ ุชุนููู ุงูุชุญุฏูุฏุงุช ุจุนุฏ ุงููุฌุงุญ

## ๐ ุณููุงุฑูู ุงูุงุณุชุฎุฏุงู

### 1. **ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงููุงุนุจูู**
```
๐ฅ ุงุฎุชุฑ 5 ูุงุนุจูู โ ุฎุตู 5%
๐ฅ ุงุฎุชุฑ 10 ูุงุนุจูู โ ุฎุตู 7%
๐ฅ ุงุฎุชุฑ 20 ูุงุนุจ โ ุฎุตู 10%
๐ฅ ุงุฎุชุฑ 50 ูุงุนุจ โ ุฎุตู 15%
```

### 2. **ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุทุฑููุฉ ุงูุฏูุน**
```
๐ณ ุจุทุงูุฉ ุจูููุฉ (ุฌูุฏูุง) โ 0% ุฎุตู
๐ฑ ููุฏุงููู ูุงุด โ 2% ุฎุตู
๐ฑ ุงุชุตุงูุงุช ูุงุด โ 2% ุฎุตู
```

### 3. **ุงููุณุชุฎุฏู ูููุฑ "ุงุฏูุน ุจุงูุจุทุงูุฉ"**
```
1๏ธโฃ ููุชุญ ููุฏุงู ุฌูุฏูุง
2๏ธโฃ ููุดุฆ ุฌูุณุฉ ุฏูุน ูู ุงูุฎูููุฉ
3๏ธโฃ ููุฌู ูุตูุญุฉ ุงูุฏูุน ุงูุขููุฉ
4๏ธโฃ ูุฏุฎู ุจูุงูุงุช ุงูุจุทุงูุฉ
5๏ธโฃ ูุชู ุงูุฏูุน ูุงูุนูุฏุฉ ููุตูุญุฉ
```

### 4. **ูุนุงูุฌุฉ ูุฌุงุญ ุงูุฏูุน**
```
โ ุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ
โ ุฅุนุงุฏุฉ ุชุนููู ุงุฎุชูุงุฑ ุงููุงุนุจูู
โ ุชุณุฌูู ุงููุนุงููุฉ ูููุฑุงุฌุนุฉ
```

## ๐ ุงูุจูุงูุงุช ุงููุญููุธุฉ

### ุฌุฏูู `bulk_payments`
```sql
{
  "user_id": "abc123",
  "account_type": "club",
  "players": [
    {
      "id": "player1",
      "name": "ุฃุญูุฏ ูุญูุฏ",
      "package": "subscription_6months",
      "amount": 120
    }
  ],
  "total_amount": 570,      // ุจุนุฏ ุงูุฎุตููุงุช
  "original_amount": 600,   // ูุจู ุงูุฎุตููุงุช
  "discount_amount": 30,    // ุฅุฌูุงูู ุงูุฎุตู
  "payment_method": "geidea",
  "payment_status": "completed",
  "transaction_id": "geidea_session_123",
  "order_id": "BULK_CLUB_abc123_1699123456789",
  "country": "EG",
  "currency": "EGP",
  "exchange_rate": 1,
  "created_at": "2024-01-01T12:00:00Z"
}
```

## ๐ ุงูุฃูุงู ูุงูููุซูููุฉ

### 1. **ุงูุชุญูู ูู ุงูุฏุฎูู**
```tsx
if (selectedCount === 0) {
  alert('ูุฑุฌู ุงุฎุชูุงุฑ ูุงุนุจ ูุงุญุฏ ุนูู ุงูุฃูู ููุฏูุน');
  return;
}
```

### 2. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
```tsx
try {
  // ุนูููุฉ ุงูุฏูุน
} catch (error) {
  console.error('ุฎุทุฃ ูู ูุนุงูุฌุฉ ุงูุฏูุน:', error);
  alert('ุชู ุงูุฏูุน ุจูุฌุงุญุ ููู ุญุฏุซ ุฎุทุฃ ูู ุญูุธ ุงูุจูุงูุงุช.');
}
```

### 3. **ุจูุงูุงุช ุขููุฉ**
- ๐ ุชุดููุฑ ุงูุจูุงูุงุช ุนุจุฑ HTTPS
- ๐ ูุนุฑูุงุช ูุฑูุฏุฉ ููุทูุจุงุช
- ๐ง ุจุฑูุฏ ุฅููุชุฑููู ุงููุณุชุฎุฏู ุงูุญูููู
- ๐ค ูุนุฑู ุงููุณุชุฎุฏู ุงููุตุงุฏู

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### ุงููุฒุงูุง ุงููุญููุฉ:
1. **ูุธุงู ุฏูุน ูุชูุงูู** ๐ฏ
2. **ุญุณุงุจ ุฐูู ููุฎุตููุงุช** ๐ฐ
3. **ุญูุธ ุจูุงูุงุช ุดุงูู** ๐
4. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ** โจ
5. **ุฃูุงู ุนุงูู ุงููุณุชูู** ๐

### ุงูุขู ูููู ูููุณุชุฎุฏููู:
- โ ุงุฎุชูุงุฑ ุนุฏุฉ ูุงุนุจูู ููุฏูุน ุงูุฌูุงุนู
- โ ุงูุงุณุชูุงุฏุฉ ูู ุงูุฎุตููุงุช ุงูุชููุงุฆูุฉ
- โ ุงูุฏูุน ุจุงูุจุทุงูุฉ ุงูุจูููุฉ ุนุจุฑ ุฌูุฏูุง
- โ ุชุชุจุน ุงูุนูููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงูุญุตูู ุนูู ุชุฃููุฏ ููุฑู ููุฏูุน

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

ุงููุธุงู ููุชูู ููุนูู ุจููุงุกุฉ ุนุงููุฉ. ุงููุณุชุฎุฏููู ูููููู ุงูุขู:

1. **ุงูุฏุฎูู** ูุตูุญุฉ ุงูุฏูุน ุงูุฌูุงุนู
2. **ุงุฎุชูุงุฑ** ุงููุงุนุจูู ุงููุทููุจูู
3. **ุงูุงุณุชูุงุฏุฉ** ูู ุงูุฎุตููุงุช ุงูุชููุงุฆูุฉ
4. **ุงูุฏูุน** ุจุงูุจุทุงูุฉ ุงูุจูููุฉ ุนุจุฑ ุฌูุฏูุง
5. **ุงูุญุตูู** ุนูู ุชุฃููุฏ ููุฑู ูุขูู

ุงููุธุงู ุฌุงูุฒ ููุฅูุชุงุฌ! ๐ 
