# دليل الاختbار السريع - Geidea Integration

## 🚀 اختبار سريع (5 دقائق)

### الخطوة 1: تأكد من تشغيل الخادم
```bash
npm run dev
```

يجب أن ترى رسالة مثل:
```
✓ Ready on http://localhost:3002
```

### الخطوة 2: افتح صفحة الدفع
اذهب إلى: `http://localhost:3002/dashboard/payment`

### الخطوة 3: اختبر واجهة الدفع
1. **اختر باقة**: انقر على أي باقة من الثلاث
2. **اختر طريقة الدفع**: انقر على "بطاقة ائتمان/مدى" 💳
3. **يجب أن تظهر**: 
   - زر "الدفع عبر البطاقة الإلكترونية" 
   - رسالة توضيحية أسفل الزر
   - أيقونات الأمان

### الخطوة 4: اختبر إنشاء الجلسة
1. انقر على زر "الدفع عبر البطاقة الإلكترونية"
2. يجب أن ترى "جاري إنشاء جلسة الدفع..."
3. افتح Developer Tools (F12) واذهب إلى Console
4. يجب أن ترى logs مثل:
```
📥 [Geidea API] Received body: {...}
🧪 [Geidea API] Test mode - returning mock session: test_session_...
```

### الخطوة 5: اختبر نافذة الدفع
إذا كان الكود يعمل بشكل صحيح:
- **في وضع الاختبار**: ستظهر رسالة خطأ تقول أن مكتبة الدفع غير متاحة (هذا طبيعي)
- **مع مفاتيح حقيقية**: ستفتح نافذة الدفع الآمنة

## 🔍 علامات النجاح

### ✅ ما يجب أن تراه:
- [ ] صفحة الدفع تظهر بشكل صحيح
- [ ] خيار "بطاقة ائتمان/مدى" متاح
- [ ] زر الدفع يظهر عند اختيار Geidea
- [ ] النقر على الزر يؤدي لحالة "جاري التحميل"
- [ ] رسائل في Console تؤكد إنشاء الجلسة

### ❌ علامات وجود مشاكل:
- [ ] صفحة بيضاء أو خطأ 500
- [ ] عدم ظهور خيار Geidea
- [ ] خطأ عند النقر على زر الدفع
- [ ] عدم وجود logs في Console

## 🛠️ إصلاح المشاكل الشائعة

### مشكلة: صفحة بيضاء
**الحل**: تحقق من:
```bash
# في terminal
npm run dev
# ابحث عن أخطاء TypeScript أو JavaScript
```

### مشكلة: خطأ في API
**الحل**: تحقق من ملف `.env.local`:
```env
GEIDEA_MERCHANT_PUBLIC_KEY=3448c010-87b1-41e7-9771-cac444268cfb
GEIDEA_API_PASSWORD=edfd5eee-fd1b-4932-9ee1-d6d9ba7599f0
```

### مشكلة: لا تظهر مكتبة GeideaCheckout
**الحل**: تأكد من وجود السكريپت في `layout.tsx`:
```html
<script src="https://www.merchant.geidea.net/hpp/geideaCheckout.min.js"></script>
```

## 📱 اختبار شامل (10 دقائق)

### على Desktop:
1. Chrome ✓
2. Firefox ✓ 
3. Safari ✓
4. Edge ✓

### على Mobile:
1. Chrome Mobile ✓
2. Safari Mobile ✓

### اختبار سيناريوهات مختلفة:
1. مستخدم من السعودية ✓
2. مستخدم من مصر ✓
3. مستخدم من قطر ✓
4. باقات مختلفة (3 شهور، 6 شهور، 12 شهر) ✓

## 📊 نتائج الاختبار

| العنصر | حالة | ملاحظات |
|---------|------|---------|
| API Route | ✅ | يعمل |
| واجهة الدفع | ✅ | تظهر بشكل صحيح |
| إنشاء الجلسة | ✅ | يتم بنجاح |
| معالجة الأخطاء | ✅ | رسائل واضحة |
| مكتبة Geidea | ⚠️ | تحتاج مفاتيح حقيقية |

## 🎯 الخطوة التالية

بعد نجاح هذا الاختبار:
1. احصل على مفاتيح Geidea الحقيقية
2. استبدل المفاتيح في `.env.local` 
3. اختبر مع بطاقات اختبار حقيقية
4. اذهب للإنتاج!

---

**💡 نصيحة**: إذا كان كل شيء يعمل في هذا الاختبار، فالكود جاهز 99% للإنتاج! 