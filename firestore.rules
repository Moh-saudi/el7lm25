rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // ğŸ“§ Ù‚Ø§Ø¹Ø¯Ø© Ø®Ø§ØµØ© Ù„Ù€ OTP - ØªØ³Ù…Ø­ Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù… Ø¨Ø¯ÙˆÙ† Ù…ØµØ§Ø¯Ù‚Ø©
    match /email_otps/{email} {
      allow read, write: if true; // Ù…Ø¤Ù‚Øª Ù„Ù„Ø¥ØµÙ„Ø§Ø­ - ÙŠÙ…ÙƒÙ† ØªÙ‚ÙŠÙŠØ¯Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹
    }
    
    // ğŸ” Ù‚Ø§Ø¹Ø¯Ø© Ø£Ø³Ø§Ø³ÙŠØ©: Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ù…ØµØ§Ø¯Ù‚ Ø¹Ù„ÙŠÙ‡ ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ù„ÙƒØªØ§Ø¨Ø©
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
    
    // ğŸ›¡ï¸ Ù‚ÙˆØ§Ø¹Ø¯ Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø£Ù…Ø§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    match /admins/{adminId} {
      allow read, write: if request.auth != null;
    }
    
    // ğŸ’¬ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ
    match /messages/{messageId} {
      allow read, write: if request.auth != null;
    }
    
    match /conversations/{conversationId} {
      allow read, write: if request.auth != null;
    }
    
    match /support_messages/{messageId} {
      allow read, write: if request.auth != null;
    }
    
    match /support_conversations/{conversationId} {
      allow read, write: if request.auth != null;
    }
  }
} 